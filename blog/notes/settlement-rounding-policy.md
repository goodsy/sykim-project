---
title: 정산 반올림 정책 설계 기준
tags: [notes, settlement, rounding, java, bigdecimal]
---

정산 시스템에서 반올림은 구현 디테일이 아니라 **정산 정책**이다.  
반올림 기준이 바뀌면 가맹점 정산금, 세금, 회계 전표 결과까지 모두 달라질 수 있다.

---

## 1. 반올림이 발생하는 지점

정산 로직에서 반올림이 필요한 대표적인 시점은 다음과 같다.

1. 수수료 금액 계산
    - 승인금액 × 수수료율
2. 부가세(VAT) 계산
    - 수수료 × 부가세율
3. 최종 정산금액 확정
    - 승인금액 - 수수료 - 부가세

> 중간 단계에서 반올림하느냐, 마지막에만 반올림하느냐에 따라 결과가 달라질 수 있다.

---

## 2. 반올림 정책의 구성 요소

반올림 정책은 반드시 아래 요소를 함께 정의해야 한다.

- Scale (자릿수)
    - 원 단위: 0
    - 소수점 허용: 2 등
- RoundingMode
    - DOWN, HALF_UP, HALF_EVEN 등
- 적용 시점
    - 수수료 계산 시
    - VAT 계산 시
    - 최종 정산 확정 시

---

## 3. 실무에서 자주 쓰는 RoundingMode

### DOWN (버림)
- 가맹점 정산에서 가장 많이 사용
- 보수적인 금액 산정

```java
.setScale(0, RoundingMode.DOWN)
